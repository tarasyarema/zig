FROM ubuntu:latest

WORKDIR /tmp/zig

RUN apt-get update

RUN apt-get install -y wget git gcc g++ cmake gnupg software-properties-common

RUN wget https://apt.llvm.org/llvm-snapshot.gpg.key && apt-key add llvm-snapshot.gpg.key

RUN add-apt-repository 'deb http://apt.llvm.org/bionic/ llvm-toolchain-bionic-10 main'

RUN apt-get install -y libllvm-10-ocaml-dev libllvm10 llvm-10 llvm-10-dev llvm-10-doc \
            llvm-10-examples llvm-10-runtime

RUN apt-get install -y clang-10 clang-tools-10 clang-10-doc libclang-common-10-dev \
            libclang-10-dev libclang1-10 clang-format-10 clangd-10

RUN apt-get install -y libfuzzer-10-dev

RUN apt-get install -y lldb-10

RUN apt-get install -y lld-10

RUN apt-get install -y libc++-10-dev libc++abi-10-dev

RUN apt-get install -y libomp-10-dev

RUN apt-get upgrade -y

WORKDIR /usr/bin

RUN git clone https://github.com/ziglang/zig.git

WORKDIR /usr/bin/zig/build

RUN cmake ..

RUN make install